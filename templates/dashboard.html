<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capstone 2025</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header class="main-header">
        <div class="logo-title">
            <span class="logo-svg">
                <!-- Simple SVG logo placeholder -->
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="20" cy="20" r="20" fill="#007bff"/>
                  <text x="50%" y="55%" text-anchor="middle" fill="#fff" font-size="18" font-family="Segoe UI, Arial" dy=".3em">C</text>
                </svg>
            </span>
            <h1>Capstone 2025</h1>
        </div>
        <button id="createProjectBtn" class="btn btn-primary create-project-cta">Start a New Project</button>
    </header>
    <main class="main-content">
        <div class="search-bar-wrapper" style="display: none;">
            <input type="text" id="projectSearchInput" class="search-bar" placeholder="Search by tag or keyword...">
        </div>
        <div id="noProjectsContainer" class="no-projects-container" style="display: none;">
            <div class="no-projects-icon">üìÅ</div>
            <p>user-id: {{ env.user_id }}, signed_in: {{ env.signed_in }}, auth-payload: {{ env.auth_payload }}</p>
            <h2 class="no-projects-title">There are no projects yet.</h2>
            <p class="no-projects-subtitle">Start your first project to begin exploring research papers and getting personalized recommendations.</p>
        </div>
        <div id="projectsList" class="projects-list">
            <!-- Project cards will be rendered here by JS -->
        </div>
    </main>
    <div id="clerk-panel" style="position: absolute; top: 20%; left: 20%;"></div>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script async crossorigin="anonymous" data-clerk-publishable-key="{{ env.CLERK_PUBLISHABLE_KEY }}"
        src="{{ env.CLERK_FRONTEND_API }}" type="text/javascript"></script>
    <script>
        window.addEventListener('load', async function () {
            await Clerk.load()

            if (Clerk.isSignedIn) {
                document.getElementById('clerk-panel').innerHTML = `
                <div id="user-button"></div>
            `

                const userButtonDiv = document.getElementById('user-button')

                Clerk.mountUserButton(userButtonDiv)
            } else {
                document.getElementById('clerk-panel').innerHTML = `
                <div id="sign-in"></div>
            `

                const signInDiv = document.getElementById('sign-in')

                Clerk.mountSignIn(signInDiv)
            }
        })
    </script>
</body>
</html>
