<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Overview</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    {% include 'components/header.html' %}
    <div class="container">
        <div class="project-header">
            <h1 id="projectTitleDisplay"></h1>
            <div class="description-wrapper">
                <div class="description-content" id="projectDescriptionDisplay">
                    <!-- Project description will be loaded here -->
                </div>
                <div class="description-fade-overlay" id="descriptionFadeOverlay"></div>
            </div>
        </div>

        <div class="agent-thoughts-section">
            <h2>Agent's Thoughts</h2>
            <ul id="agentThoughtsContainer" class="agent-thoughts-list">
                </ul>
        </div>

        <!-- Latest Papers Section (formerly PubSub) -->
        <div class="recommendations-section">
            <h2>Latest Papers</h2>
            <div id="pubsubPapersContainer" class="recommendations-grid"></div>
        </div>

        <div class="recommendations-section">
            <h2>Recommendations</h2>

            <!-- Search Panel - Initially Hidden -->
            <div id="searchPanel" class="search-panel" style="display: none;">
                <div class="search-controls-container">
                    <!-- Search Input -->
                    <div class="search-input-wrapper">
                        <input type="text" id="titleSearchInput" class="search-input" placeholder="Search papers by title...">
                        <button id="clearSearchBtn" class="clear-search-btn">×</button>
                    </div>

                    <!-- Sort Dropdown -->
                    <div class="sort-dropdown">
                        <div class="dropdown-with-tooltip">
                            <select id="sortSelect" class="sort-select">
                                <option value="" disabled selected>Sort papers</option>
                                <option value="title">Sort by Title</option>
                                <option value="rating">Sort by Rating</option>
                                <option value="relevance">Sort by Relevance</option>
                                <option value="year">Sort by Year (Newest First)</option>
                                <option value="citations">Sort by Citations (Most First)</option>
                                <option value="fwci">Sort by FWCI (Highest First)</option>
                                <option value="percentile">Sort by Percentile (Highest First)</option>
                                <option value="oa">Open Access First</option>
                            </select>
                            <span class="sort-info-icon" title="" id="sortInfoIcon">ℹ️</span>
                        </div>
                        <button id="clearSortBtn" class="clear-dropdown-btn">×</button>
                    </div>

                    <!-- Filter Dropdown -->
                    <div class="filter-dropdown">
                        <select id="filterSelect" class="filter-select">
                            <option value="" disabled selected>Filter papers</option>
                            <option value="rated">Rated papers</option>
                            <option value="unrated">Unrated papers</option>
                            <option value="open-access">Open Access Only</option>
                            <option value="closed-access">Closed Access Only</option>
                        </select>
                        <button id="clearFilterBtn" class="clear-dropdown-btn">×</button>
                    </div>
                </div>

                <div class="results-count">
                    <span id="resultsCount">0 papers found</span>
                </div>
            </div>

            <div id="recommendationsContainer" class="recommendations-grid">
                </div>
            <div class="load-more-container">
                <button id="loadMoreBtn" class="load-more-btn" style="display: none;">
                    Load More
                </button>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    {% include 'components/clerk_scripts.html' %}
</body>
</html>
