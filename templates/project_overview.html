<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Overview</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header class="main-header">
        <div class="logo-title">
            <a href="/" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
                <span class="logo-svg">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="20" cy="20" r="20" fill="#007bff"/>
                      <text x="50%" y="55%" text-anchor="middle" fill="#fff" font-size="18" font-family="Segoe UI, Arial" dy=".3em">C</text>
                    </svg>
                </span>
                <h1 style="margin-left: 10px;">Capstone 2025</h1>
            </a>
        </div>
    </header>
    <div class="container">
        <div class="project-header">
            <h1 id="projectTitleDisplay"></h1>
            <div class="description-wrapper">
                <div class="description-content" id="projectDescriptionDisplay">
                    <!-- Project description will be loaded here -->
                </div>
                <div class="description-fade-overlay" id="descriptionFadeOverlay"></div>
            </div>
            <div class="description-controls" id="descriptionControls">
                <button class="expand-btn" id="descriptionToggle">
                    <span class="expand-text">Show full description</span>
                    <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <polyline points="6,9 12,15 18,9"></polyline>
                    </svg>
                </button>
            </div>
        </div>

        <div class="agent-thoughts-section">
            <h2>Agent's Thoughts</h2>
            <ul id="agentThoughtsContainer" class="agent-thoughts-list">
                </ul>
        </div>

        <!-- Latest Papers Section (formerly PubSub) -->
        <div class="recommendations-section">
            <h2>Latest Papers</h2>
            <div id="pubsubPapersContainer" class="recommendations-grid"></div>
        </div>

        <div class="recommendations-section">
            <h2>Recommendations</h2>

            <!-- Search Panel - Initially Hidden -->
            <div id="searchPanel" class="search-panel" style="display: none;">
                <div class="search-controls-container">
                    <!-- Search Input -->
                    <div class="search-input-wrapper">
                        <input type="text" id="titleSearchInput" class="search-input" placeholder="Search papers by title...">
                        <button id="clearSearchBtn" class="clear-search-btn">×</button>
                    </div>

                    <!-- Sort Dropdown -->
                    <div class="sort-dropdown">
                        <select id="sortSelect" class="sort-select">
                            <option value="" disabled selected>Sort papers</option>
                            <option value="title">Sort by Title</option>
                            <option value="rating">Sort by Rating</option>
                            <option value="relevance">Sort by Relevance</option>
                        </select>
                        <button id="clearSortBtn" class="clear-dropdown-btn">×</button>
                    </div>

                    <!-- Filter Dropdown -->
                    <div class="filter-dropdown">
                        <select id="filterSelect" class="filter-select">
                            <option value="" disabled selected>Filter papers</option>
                            <option value="rated">Rated papers</option>
                            <option value="unrated">Unrated papers</option>
                        </select>
                        <button id="clearFilterBtn" class="clear-dropdown-btn">×</button>
                    </div>
                </div>

                <div class="results-count">
                    <span id="resultsCount">0 papers found</span>
                </div>
            </div>

            <div id="recommendationsContainer" class="recommendations-grid">
                </div>
            <div class="load-more-container">
                <button id="loadMoreBtn" class="load-more-btn" style="display: none;">
                    Load More
                </button>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
